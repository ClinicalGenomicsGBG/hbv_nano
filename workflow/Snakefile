# snakemake -np fastp/{bc15,bc16}_filt.fastq.gz (dry run these two files)
# snakenake -np (dry run everything)

# currently run using this mamba env: /home/xschmd/micromamba/envs/snakemake_hbv

FILES = glob_wildcards("data/{sample}.fastq.gz")    # get all fastq files

NAMES = FILES.sample    # extract the sample names from the files

rule all:    # specify the final output files
    input:
        expand("fastp/{sample}_filt.fastq.gz", sample=NAMES)

rule fastp:    # filter reads
    input:
        fastq = "data/{sample}.fastq.gz"
    output: 
        fastq = "fastp/{sample}_filt.fastq.gz",    # output filtered read
        report = "fastp/report/{sample}_filt.html"       # output fastp report
    shell:
        "fastp -i {input.fastq} -o {output.fastq} -h {output.report}"